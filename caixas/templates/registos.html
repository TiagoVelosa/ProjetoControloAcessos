{% extends "base.html" %}

{% block title %}
Registos
{% endblock %}

{% block content %}



<div style="display: flex; flex-direction: row; margin-top: 2%;" id = "not_printable">
    <h3 style="width: 50%;">Relatório </h3>
</div>

<p>Filtros:</p> 
<form method="GET">   
    <div id = "filtros" style="justify-content: space-between;"></div>
        <label for="edificio">Edifício:</label>
        <select name ="edificio" id="edificio">
            <option value="" disabled selected>Selecione o edifício:</option>
            {% for edf in edificios %}               
                <option value="{{edf.id}}"> {{edf}} </option>
            {% endfor %}
        </select>
    
        <label for="data_inicio">Desde:</label>
        <input type="datetime-local" name="data_inicio">
        <label for="data_fim">Até</label>
        <input type="datetime-local" name="data_fim">
        <button type="submit">Filtrar</button> 
    </div> 
</form>

<div class = "card mb-4"></div>
{% if registos %}
<div id = "Teste" style="overflow: scroll; height: 600px;">
    <table  width="100%" cellspacing="0" >
        <thead >
            <tr>
                <th rowspan = "2" class ="border_bottom">Registo</th>                
                <th>Data Caixa</th>
                <th>Local</th>
                <th>Pessoa</th>                
            </tr>
            <tr>
                <td class ="border_bottom">Data Servidor</td>
                <td class ="border_bottom">ID Caixa</td>
                <td class ="border_bottom">Cartão</td>
            </tr>
        </thead>
        <tbody>
            {% for registo in registos%}
            <tr>
                <th rowspan = "2" class ="border_bottom">{{registo.id}}</td>
                <td class="td_primeira_linha">{{ registo.data_servidor|date:"d M Y" }} {{ registo.data_servidor|time:"H:i" }}</td>                    
                <td class="td_primeira_linha">{{registo.local_atual_caixa}}</td>
                <td class="td_primeira_linha">{{registo.nome_atual_cartao}}</td>
            </tr>

            <tr>
                <td class ="border_bottom" style="font-size:smaller; ">{{ registo.data_caixa|date:"d M Y" }} {{ registo.data_caixa|time:"H:i" }}</td>
                <td class ="border_bottom" style="font-size:smaller; ">{{registo.caixa_id}}</td>  
                <td class ="border_bottom" style="font-size:smaller; ">{{registo.cartao}}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endif %}
{% endblock %}